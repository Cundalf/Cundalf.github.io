# Ejemplo de configuración Apache para el portfolio

<VirtualHost *:80>
    ServerName tu-dominio.com
    ServerAlias www.tu-dominio.com
    DocumentRoot /var/www/portfolio
    
    # Configuración para Next.js exportado
    <Directory "/var/www/portfolio">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Configuración para rutas de Next.js
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ /$1.html [L,QSA]
    </Directory>
    
    # Configuración de caché para archivos estáticos
    <LocationMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|eot|ttf|otf)$">
        ExpiresActive On
        ExpiresDefault "access plus 1 year"
        Header set Cache-Control "public, immutable"
    </LocationMatch>
    
    # Configuración de compresión
    <Location "/">
        SetOutputFilter DEFLATE
        SetEnvIfNoCase Request_URI \
            \.(?:gif|jpe?g|png|ico)$ no-gzip dont-vary
        SetEnvIfNoCase Request_URI \
            \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
    </Location>
    
    # Configuración de seguridad
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    
    # Logs
    CustomLog /var/log/apache2/portfolio_access.log combined
    ErrorLog /var/log/apache2/portfolio_error.log
</VirtualHost>

# Configuración HTTPS (opcional)
<VirtualHost *:443>
    ServerName tu-dominio.com
    ServerAlias www.tu-dominio.com
    DocumentRoot /var/www/portfolio
    
    # Configuración SSL
    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/tu-dominio.com.crt
    SSLCertificateKeyFile /etc/ssl/private/tu-dominio.com.key
    
    # Configuración SSL moderna
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384
    SSLHonorCipherOrder off
    
    # Resto de configuración igual al VirtualHost HTTP
    <Directory "/var/www/portfolio">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ /$1.html [L,QSA]
    </Directory>
    
    # ... resto de configuraciones ...
</VirtualHost>

# Redirección HTTP a HTTPS
<VirtualHost *:80>
    ServerName tu-dominio.com
    ServerAlias www.tu-dominio.com
    Redirect permanent / https://tu-dominio.com/
</VirtualHost>

# Configuración adicional para .htaccess
# Crear archivo .htaccess en el directorio raíz del sitio:

# RewriteEngine On
# 
# # Configuración para rutas de Next.js
# RewriteCond %{REQUEST_FILENAME} !-f
# RewriteCond %{REQUEST_FILENAME} !-d
# RewriteRule ^(.*)$ /$1.html [L,QSA]
# 
# # Configuración de caché
# <IfModule mod_expires.c>
#     ExpiresActive On
#     ExpiresByType text/css "access plus 1 year"
#     ExpiresByType application/javascript "access plus 1 year"
#     ExpiresByType image/png "access plus 1 year"
#     ExpiresByType image/jpg "access plus 1 year"
#     ExpiresByType image/jpeg "access plus 1 year"
#     ExpiresByType image/gif "access plus 1 year"
#     ExpiresByType image/ico "access plus 1 year"
#     ExpiresByType image/svg+xml "access plus 1 year"
#     ExpiresByType font/woff "access plus 1 year"
#     ExpiresByType font/woff2 "access plus 1 year"
# </IfModule>
# 
# # Configuración de compresión
# <IfModule mod_deflate.c>
#     AddOutputFilterByType DEFLATE text/plain
#     AddOutputFilterByType DEFLATE text/html
#     AddOutputFilterByType DEFLATE text/xml
#     AddOutputFilterByType DEFLATE text/css
#     AddOutputFilterByType DEFLATE application/xml
#     AddOutputFilterByType DEFLATE application/xhtml+xml
#     AddOutputFilterByType DEFLATE application/rss+xml
#     AddOutputFilterByType DEFLATE application/javascript
#     AddOutputFilterByType DEFLATE application/x-javascript
# </IfModule>
# 
# # Configuración de seguridad
# <IfModule mod_headers.c>
#     Header always set X-Frame-Options "SAMEORIGIN"
#     Header always set X-Content-Type-Options "nosniff"
#     Header always set X-XSS-Protection "1; mode=block"
# </IfModule> 